
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.2">
    
    
      
        <title>性能分析 - LRTZ</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto Mono";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LRTZ" class="md-header__button md-logo" aria-label="LRTZ" data-md-component="logo">
      
  <img src="../../assets/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LRTZ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              性能分析
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/lrtz-v/lrtz-v.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    lrtz-v
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../develop/git-options/" class="md-tabs__link">
        Develop
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../K8S/install/" class="md-tabs__link">
        K8S
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ServerMesh/server/" class="md-tabs__link">
        ServerMesh
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../commands/" class="md-tabs__link md-tabs__link--active">
        Linux
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Redis/redis/" class="md-tabs__link">
        Redis
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ES/IK%E5%88%86%E8%AF%8D/" class="md-tabs__link">
        ES
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Golang/goquery/" class="md-tabs__link">
        Golang
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../tags/" class="md-tabs__link">
      Tag
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LRTZ" class="md-nav__button md-logo" aria-label="LRTZ" data-md-component="logo">
      
  <img src="../../assets/favicon.ico" alt="logo">

    </a>
    LRTZ
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lrtz-v/lrtz-v.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    lrtz-v
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Develop
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Develop" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Develop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/git-options/" class="md-nav__link">
        Git常用操作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/tools/" class="md-nav__link">
        常用工具
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          K8S
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="K8S" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          K8S
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../K8S/install/" class="md-nav__link">
        安装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../K8S/resource/" class="md-nav__link">
        资源类型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../K8S/service_%26_network/" class="md-nav__link">
        服务与负载
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          ServerMesh
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ServerMesh" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          ServerMesh
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ServerMesh/server/" class="md-nav__link">
        基础知识
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/" class="md-nav__link">
        常用命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../centos_kernal_upgrade/" class="md-nav__link">
        Centos内核升级
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../centos_disk_mount/" class="md-nav__link">
        Centos磁盘挂载
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          性能分析
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        性能分析
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    平均负载
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    上下文切换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    进程调度时机
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    CPU 使用率
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    工具
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    网络
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipcs" class="md-nav__link">
    IPCS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    文件分析
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Redis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Redis" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Redis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Redis/redis/" class="md-nav__link">
        简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Redis/HashTable/" class="md-nav__link">
        HashTable
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          ES
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ES" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          ES
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ES/IK%E5%88%86%E8%AF%8D/" class="md-nav__link">
        IK分词热更新
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          Golang
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Golang" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Golang
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/goquery/" class="md-nav__link">
        Goquery实用姿势
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        Tag
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    平均负载
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    上下文切换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    进程调度时机
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    CPU 使用率
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    工具
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    网络
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipcs" class="md-nav__link">
    IPCS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    文件分析
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              

                
  <a href="https://github.com/lrtz-v/lrtz-v.github.io/edit/master/docs/linux/analysis.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  

  <nav class="md-tags" >
    
      
        <a href="../../tags/#linux" class="md-tag">
          Linux
        </a>
      
    
  </nav>



<h1 id="_1">性能分析</h1>
<h2 id="_2">平均负载</h2>
<ul>
<li>执行 top 或者 uptime 命令，可以看到如下信息</li>
</ul>
<div class="highlight"><pre><span></span><code>  <span class="m">21</span>:40  up <span class="m">44</span> days, <span class="m">49</span> mins, <span class="m">3</span> users, load averages: <span class="m">2</span>.45 <span class="m">3</span>.11 <span class="m">3</span>.40
</code></pre></div>
<ul>
<li>
<p>信息含义</p>
</li>
<li>
<p>当前时间</p>
</li>
<li>系统运行时间</li>
<li>正在登录用户数</li>
<li>
<p>过去 1 分钟、5 分钟、15 分钟的平均负载（Load Average）</p>
<ul>
<li>简单来说，平均负载是指单位时间内，系统处于可运行状态和不可中断状态的平均进程数，也就是平均活跃进程数</li>
<li>可运行状态的进程，是指正在使用 CPU 或者正在等待 CPU 的进程，也就是我们常用 ps 命令看到的，处于 R 状态（Running 或 Runnable）的进程</li>
<li>不可中断状态的进程则是正处于内核态关键流程中的进程，并且这些流程是不可打断的，比如最常见的是等待硬件设备的 I/O 响应，也就是我们在 ps 命令中看到的 D 状态（Uninterruptible Sleep，也称为 Disk Sleep）的进程</li>
<li>但它实际上是活跃进程数的指数衰减平均值</li>
</ul>
</li>
<li>
<p>注意</p>
</li>
<li>平均负载高有可能是 CPU 密集型进程导致的</li>
<li>平均负载高并不一定代表 CPU 使用率高，还有可能是 I/O 更繁忙了</li>
<li>当发现负载高的时候，你可以使用 mpstat、pidstat 等工具，辅助分析负载的来源</li>
</ul>
<h2 id="_3">上下文切换</h2>
<ul>
<li>
<p>进程上下文切换</p>
</li>
<li>
<p>系统调用，完成从用户态到内核态的转变</p>
<ul>
<li>CPU 寄存器里原来用户态的指令位置，需要先保存起来。接着，为了执行内核态代码</li>
<li>CPU 寄存器需要更新为内核态指令的新位置。最后才是跳转到内核态运行内核任务</li>
<li>而系统调用结束后，CPU 寄存器需要恢复原来保存的用户态，然后再切换到用户空间，继续运行进程。所以，一次系统调用的过程，其实是发生了两次 CPU 上下文切换</li>
</ul>
</li>
<li>
<p>进程间切换</p>
<ul>
<li>从一个进程切换到另一个进程运行</li>
<li>在保存当前进程的内核状态和 CPU 寄存器之前，需要先把该进程的虚拟内存、栈等保存下来；而加载了下一进程的内核态后，还需要刷新进程的虚拟内存和用户栈</li>
<li>进程的上下文不仅包括了虚拟内存、栈、全局变量等用户空间的资源，还包括了内核堆栈、寄存器等内核空间的状态</li>
</ul>
</li>
<li>
<p>线程上下文切换</p>
</li>
<li>
<p>前后两个线程属于不同进程</p>
<ul>
<li>因为资源不共享，所以切换过程就跟进程上下文切换是一样</li>
</ul>
</li>
<li>
<p>前后两个线程属于同一个进程</p>
<ul>
<li>因为虚拟内存是共享的，所以在切换时，虚拟内存这些资源就保持不动，只需要切换线程的私有数据、寄存器等不共享的数据</li>
</ul>
</li>
<li>
<p>中断上下文切换</p>
</li>
<li>
<p>中断上下文切换并不涉及到进程的用户态</p>
<ul>
<li>即便中断过程打断了一个正处在用户态的进程，也不需要保存和恢复这个进程的虚拟内存、全局变量等用户态资源。中断上下文，其实只包括内核态中断服务程序执行所必需的状态，包括 CPU 寄存器、内核堆栈、硬件中断参数等</li>
</ul>
</li>
<li>上半部<ul>
<li>用来快速处理中断,主要处理跟硬件紧密相关的或时间敏感的工作</li>
</ul>
</li>
<li>
<p>下半部</p>
<ul>
<li>延迟处理上半部未完成的工作，通常以内核线程的方式运行；通过软中断信号通知</li>
</ul>
</li>
<li>
<p>查看系统的上下文切换情况</p>
</li>
<li>
<p>通过 vmstat 查看系统总体的上下文切换</p>
</li>
<li>
<p>通过 pidstat 查看进程切换详情</p>
<ul>
<li>cswch：自愿上下文切换，是指进程无法获取所需资源，导致的上下文切换</li>
<li>nvcswch：非自愿上下文切换，则是指进程由于时间片已到等原因，被系统强制调度，进而发生的上下文切换</li>
</ul>
</li>
<li>
<p>问题分析</p>
</li>
<li>
<p>自愿上下文切换变多了，说明进程都在等待资源，有可能发生了 I/O 等其他问题</p>
</li>
<li>非自愿上下文切换变多了，说明进程都在被强制调度，也就是都在争抢 CPU，说明 CPU 的确成了瓶颈</li>
<li>中断次数变多了，说明 CPU 被中断处理程序占用，还需要通过查看 /proc/interrupts 文件来分析具体的中断类型</li>
</ul>
<h2 id="_4">进程调度时机</h2>
<ul>
<li>为了保证所有进程可以得到公平调度，CPU 时间被划分为一段段的时间片，这些时间片再被轮流分配给各个进程。这样，当某个进程的时间片耗尽了，就会被系统挂起，切换到其它正在等待 CPU 的进程运行</li>
<li>进程在系统资源不足（比如内存不足）时，要等到资源满足后才可以运行，这个时候进程也会被挂起，并由系统调度其他进程运行</li>
<li>当进程通过睡眠函数 sleep 这样的方法将自己主动挂起时，自然也会重新调度</li>
<li>当有优先级更高的进程运行时，为了保证高优先级进程的运行，当前进程会被挂起，由高优先级进程来运行</li>
<li>发生硬件中断时，CPU 上的进程会被中断挂起，转而执行内核中的中断服务程序</li>
</ul>
<h2 id="cpu">CPU 使用率</h2>
<ul>
<li>CPU 使用率 = 1 - 空闲时间 / 总 CPU 时间</li>
<li>平均 CPU 使用率 = (空闲时间 2 - 空闲时间 1) / (总 CPU 时间 2 - 总 CPU 时间 1)</li>
<li>性能工具一般都会取间隔一段时间（比如 3 秒）的两次值</li>
<li>常用的性能分析工具</li>
<li>top/htop 显示了系统总体的 CPU 和内存使用情况，以及各个进程的资源使用情况</li>
<li>ps 显示了每个进程的资源使用情况</li>
</ul>
<h2 id="_5">工具</h2>
<ul>
<li>
<p>stress Linux 系统压力测试工具</p>
</li>
<li>
<p>stress --cpu 1 --timeout 600</p>
</li>
<li>stress -i 1 --timeout 600</li>
<li>
<p>stress -c 8 --timeout 600</p>
</li>
<li>
<p>sysbench 多线程的基准测试工具</p>
</li>
<li>
<p>sysbench --threads=10 --max-time=300 threads run</p>
</li>
<li>
<p>sysstat 包含了常用的 Linux 性能工具</p>
</li>
<li>
<p>mpstat 是一个常用的多核 CPU 性能分析工具，用来实时查看每个 CPU 的性能指标，以及所有 CPU 的平均指标</p>
<ul>
<li>mpstat -P ALL 5 20</li>
</ul>
</li>
<li>
<p>pidstat 是一个常用的进程性能分析工具，用来实时查看进程的 CPU、内存、I/O 以及上下文切换等性能指标</p>
<ul>
<li>pidstat -u 5 1</li>
<li>pidstat -w 5</li>
<li>pidstat -wt 1</li>
</ul>
</li>
<li>
<p>vmstat 一个常用的系统性能分析工具，主要用来分析系统的内存使用情况，也常用来分析 CPU 上下文切换和中断的次数</p>
</li>
<li>
<p>命令：vmstat 1 3</p>
</li>
<li>
<p>信息解读</p>
<ul>
<li>cs（context switch）是每秒上下文切换的次数</li>
<li>in（interrupt）则是每秒中断的次数</li>
<li>r（Running or Runnable）是就绪队列的长度，也就是正在运行和等待 CPU 的进程数</li>
<li>b（Blocked）则是处于不可中断睡眠状态的进程数</li>
</ul>
</li>
<li>
<p>iostat 动态监视系统的磁盘操作活动</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># 显示所有设备负载情况</span>
<span class="c1"># iostat</span>
Linux <span class="m">4</span>.14.0_1-0-0-48   <span class="m">07</span>/08/2022  _x86_64_    <span class="o">(</span><span class="m">56</span> CPU<span class="o">)</span>

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           <span class="m">0</span>.39    <span class="m">0</span>.19    <span class="m">0</span>.38    <span class="m">0</span>.11    <span class="m">0</span>.00   <span class="m">98</span>.93

Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
sda              <span class="m">15</span>.44         <span class="m">9</span>.48       <span class="m">176</span>.87   <span class="m">71242014</span> <span class="m">1328555302</span>

<span class="c1"># 查看TPS和吞吐量</span>
<span class="c1"># iostat -d -x -k 1 1</span>
Linux <span class="m">4</span>.14.0_1-0-0-48   <span class="m">07</span>/08/2022  _x86_64_    <span class="o">(</span><span class="m">56</span> CPU<span class="o">)</span>

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
sda               <span class="m">0</span>.00     <span class="m">9</span>.55    <span class="m">0</span>.46   <span class="m">14</span>.98     <span class="m">9</span>.48   <span class="m">176</span>.87    <span class="m">24</span>.14     <span class="m">0</span>.28   <span class="m">17</span>.74  <span class="m">109</span>.27   <span class="m">14</span>.95   <span class="m">2</span>.78   <span class="m">4</span>.29

如果%iowait的值过高，表示硬盘存在I/O瓶颈。
如果 %util 接近 <span class="m">100</span>%，说明产生的I/O请求太多，I/O系统已经满负荷，该磁盘可能存在瓶颈。
如果 svctm 比较接近 await，说明 I/O 几乎没有等待时间；
如果 await 远大于 svctm，说明I/O 队列太长，io响应太慢，则需要进行必要优化。
如果avgqu-sz比较大，也表示有大量io在等待

<span class="c1"># 查看设备使用率（%util）和响应时间（await）</span>
<span class="c1"># iostat -d -x -k 1 1</span>
Linux <span class="m">4</span>.14.0_1-0-0-48   <span class="m">07</span>/08/2022  _x86_64_    <span class="o">(</span><span class="m">56</span> CPU<span class="o">)</span>

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
sda               <span class="m">0</span>.00     <span class="m">9</span>.55    <span class="m">0</span>.46   <span class="m">14</span>.98     <span class="m">9</span>.48   <span class="m">176</span>.87    <span class="m">24</span>.14     <span class="m">0</span>.28   <span class="m">17</span>.74  <span class="m">109</span>.27   <span class="m">14</span>.95   <span class="m">2</span>.78   <span class="m">4</span>.29
</code></pre></div>
<ul>
<li>
<p>perf</p>
</li>
<li>
<p>以性能事件采样为基础，不仅可以分析系统的各种事件和内核性能，还可以用来分析指定应用程序的性能问题</p>
</li>
<li>
<p>命令</p>
<ul>
<li>perf top</li>
<li>perf record/report</li>
</ul>
</li>
<li>
<p>ab</p>
</li>
<li>
<p>apache bench, 常用的 HTTP 服务性能测试工具</p>
</li>
<li>
<p>ab -c 10 -n 100 your_url:port 并发 10 个请求测试 Nginx 性能，总共测试 100 个请求</p>
</li>
<li>
<p>dstat</p>
</li>
<li>
<p>系统资源使用分析，如磁盘</p>
</li>
<li>
<p>pstack 跟踪进程栈空间</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>pstack <span class="m">36897</span>
</code></pre></div>
<ul>
<li>strace 跟踪进程执行时的系统调用和所接收的信号</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># strace -p 36897</span>

execve<span class="o">(</span><span class="s2">&quot;/usr/bin/strace&quot;</span>, <span class="o">[</span><span class="s2">&quot;strace&quot;</span>, <span class="s2">&quot;-p&quot;</span>, <span class="s2">&quot;36897&quot;</span><span class="o">]</span>, 0x7fff22c9c440 /* <span class="m">27</span> vars */<span class="o">)</span> <span class="o">=</span> <span class="m">0</span>
brk<span class="o">(</span>NULL<span class="o">)</span>                               <span class="o">=</span> 0xc60000
mmap<span class="o">(</span>NULL, <span class="m">4096</span>, PROT_READ<span class="p">|</span>PROT_WRITE, MAP_PRIVATE<span class="p">|</span>MAP_ANONYMOUS, -1, <span class="m">0</span><span class="o">)</span> <span class="o">=</span> 0x7fc291aeb000
access<span class="o">(</span><span class="s2">&quot;/etc/ld.so.preload&quot;</span>, R_OK<span class="o">)</span>      <span class="o">=</span> -1 ENOENT <span class="o">(</span>No such file or directory<span class="o">)</span>
open<span class="o">(</span><span class="s2">&quot;/etc/ld.so.cache&quot;</span>, O_RDONLY<span class="p">|</span>O_CLOEXEC<span class="o">)</span> <span class="o">=</span> <span class="m">3</span>
fstat<span class="o">(</span><span class="m">3</span>, <span class="o">{</span><span class="nv">st_mode</span><span class="o">=</span>S_IFREG<span class="p">|</span><span class="m">0644</span>, <span class="nv">st_size</span><span class="o">=</span><span class="m">43388</span>, ...<span class="o">})</span> <span class="o">=</span> <span class="m">0</span>
mmap<span class="o">(</span>NULL, <span class="m">43388</span>, PROT_READ, MAP_PRIVATE, <span class="m">3</span>, <span class="m">0</span><span class="o">)</span> <span class="o">=</span> 0x7fc291ae0000
close<span class="o">(</span><span class="m">3</span><span class="o">)</span>                                <span class="o">=</span> <span class="m">0</span>
open<span class="o">(</span><span class="s2">&quot;/lib64/librt.so.1&quot;</span>, O_RDONLY<span class="p">|</span>O_CLOEXEC<span class="o">)</span> <span class="o">=</span> <span class="m">3</span>
read<span class="o">(</span><span class="m">3</span>, <span class="s2">&quot;\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0000\&quot;\0\0\0\0\0\0&quot;</span>..., <span class="m">832</span><span class="o">)</span> <span class="o">=</span> <span class="m">832</span>
fstat<span class="o">(</span><span class="m">3</span>, <span class="o">{</span><span class="nv">st_mode</span><span class="o">=</span>S_IFREG<span class="p">|</span><span class="m">0755</span>, <span class="nv">st_size</span><span class="o">=</span><span class="m">43712</span>, ...<span class="o">})</span> <span class="o">=</span> <span class="m">0</span>
mmap<span class="o">(</span>NULL, <span class="m">2128952</span>, PROT_READ<span class="p">|</span>PROT_EXEC, MAP_PRIVATE<span class="p">|</span>MAP_DENYWRITE, <span class="m">3</span>, <span class="m">0</span><span class="o">)</span> <span class="o">=</span> 0x7fc2916c3000
mprotect<span class="o">(</span>0x7fc2916ca000, <span class="m">2093056</span>, PROT_NONE<span class="o">)</span> <span class="o">=</span> <span class="m">0</span>
mmap<span class="o">(</span>0x7fc2918c9000, <span class="m">8192</span>, PROT_READ<span class="p">|</span>PROT_WRITE, MAP_PRIVATE<span class="p">|</span>MAP_FIXED<span class="p">|</span>MAP_DENYWRITE, <span class="m">3</span>, 0x6000<span class="o">)</span> <span class="o">=</span> 0x7fc2918c9000
close<span class="o">(</span><span class="m">3</span><span class="o">)</span>                                <span class="o">=</span> <span class="m">0</span>
open<span class="o">(</span><span class="s2">&quot;/lib64/libdw.so.1&quot;</span>, O_RDONLY<span class="p">|</span>O_CLOEXEC<span class="o">)</span> <span class="o">=</span> <span class="m">3</span>
read<span class="o">(</span><span class="m">3</span>, <span class="s2">&quot;\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\0\237\0\0\0\0\0\0&quot;</span>..., <span class="m">832</span><span class="o">)</span> <span class="o">=</span> <span class="m">832</span>
fstat<span class="o">(</span><span class="m">3</span>, <span class="o">{</span><span class="nv">st_mode</span><span class="o">=</span>S_IFREG<span class="p">|</span><span class="m">0755</span>, <span class="nv">st_size</span><span class="o">=</span><span class="m">338672</span>, ...<span class="o">})</span> <span class="o">=</span> <span class="m">0</span>
mmap<span class="o">(</span>NULL, <span class="m">2427184</span>, PROT_READ<span class="p">|</span>PROT_EXEC, MAP_PRIVATE<span class="p">|</span>MAP_DENYWRITE, <span class="m">3</span>, <span class="m">0</span><span class="o">)</span> <span class="o">=</span> 0x7fc291472000
mprotect<span class="o">(</span>0x7fc2914c0000, <span class="m">2097152</span>, PROT_NONE<span class="o">)</span> <span class="o">=</span> <span class="m">0</span>
mmap<span class="o">(</span>0x7fc2916c0000, <span class="m">12288</span>, PROT_READ<span class="p">|</span>PROT_WRITE, MAP_PRIVATE<span class="p">|</span>MAP_FIXED<span class="p">|</span>MAP_DENYWRITE, <span class="m">3</span>, 0x4e000<span class="o">)</span> <span class="o">=</span> 0x7fc2916c0000
close<span class="o">(</span><span class="m">3</span><span class="o">)</span>                                <span class="o">=</span> <span class="m">0</span>
...

<span class="c1"># 跟踪服务程序</span>
strace -o output.txt -T -tt -e <span class="nv">trace</span><span class="o">=</span>all -p <span class="m">36897</span>
</code></pre></div>
<ul>
<li>
<p>pmap <PID></p>
</li>
<li>
<p>分析线程堆栈</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>pstrack <span class="m">36897</span>
</code></pre></div>
<ul>
<li>sar (可使用 vmstat, prstat 替换)</li>
<li>查看 CPU 使用率： sar -u 1 2 (每秒采样 1 次，共采样 2 次)</li>
<li>查看 CPU 平均负载： sar -q 1 2 (查看运行队列中的进程数、系统上的进程大小、平均负载等)</li>
<li>查看内存使用： sar -r 1 2 / vmstat 1 3</li>
<li>查看内存页交换查询： sar -W 1 3</li>
</ul>
<h2 id="_6">网络</h2>
<ul>
<li>
<p>netstat 用于显示各种网络相关信息，如网络连接，路由表，接口状态 (Interface Statistics)，masquerade 连接，多播成员 (Multicast Memberships) 等等</p>
</li>
<li>
<p>列出所有端口 (包括监听和未监听的): netstat -a</p>
</li>
<li>列出所有 tcp 端口: netstat -at</li>
<li>列出所有有监听的服务状态: netstat -l</li>
<li>端口查询: netstat -antp | grep 8080</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># netstat -antp | grep 8669</span>
tcp6       <span class="m">0</span>      <span class="m">0</span> :::8669                 :::*                    LISTEN      <span class="m">36897</span>/nebula-graphd

<span class="c1"># ps 36897</span>
  PID TTY      STAT   TIME COMMAND
<span class="m">36897</span> ?        Ssl    <span class="m">4</span>:47 ./bin/nebula-graphd --flagfile ./nebula-graph/etc/nebula-graphd.conf
</code></pre></div>
<h2 id="ipcs">IPCS</h2>
<ul>
<li>IPCS 查询</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># ipcs</span>
IPC status from &lt;running system&gt; as of Fri Jul  <span class="m">8</span> <span class="m">15</span>:58:10 CST <span class="m">2022</span>
T     ID     KEY        MODE       OWNER    GROUP
Message Queues:

T     ID     KEY        MODE       OWNER    GROUP
Shared Memory:

T     ID     KEY        MODE       OWNER    GROUP
Semaphores:
s <span class="m">720896</span> 0xe93c17d9 --ra-ra-ra-     work    staff
s <span class="m">262146</span> 0x624b15dc --ra-------     work    staff
s <span class="m">262147</span> 0x89600dce --ra-------     work    staff
s <span class="m">262148</span> 0xbf832208 --ra-------     work    staff
s  <span class="m">65541</span> 0xccb76beb --ra-------     work    staff
s  <span class="m">65542</span> 0xfb27a582 --ra-------     work    staff
s  <span class="m">65543</span> 0x27a6455a --ra-------     work    staff
s  <span class="m">65544</span> 0xb1b0e0cd --ra-------     work    staff
</code></pre></div>
<h2 id="_7">文件分析</h2>
<ul>
<li>nm 显示关于指定 File 中符号的信息，文件可以是对象文件、可执行文件或对象文件库</li>
</ul>
<div class="highlight"><pre><span></span><code>zsh ➜ nm main
00000001000a6bf8 s _<span class="nv">$f64</span>.3eb0000000000000
00000001000a6c00 s _<span class="nv">$f64</span>.3f50624dd2f1a9fc
00000001000a6c08 s _<span class="nv">$f64</span>.3f847ae147ae147b
00000001000a6c10 s _<span class="nv">$f64</span>.3fd3333333333333
00000001000a6c18 s _<span class="nv">$f64</span>.3fe6666666666666
00000001000a6c20 s _<span class="nv">$f64</span>.3fee666666666666
00000001000a6c28 s _<span class="nv">$f64</span>.3ff199999999999a
00000001000a6c30 s _<span class="nv">$f64</span>.3ff3333333333333
00000001000a6c38 s _<span class="nv">$f64</span>.3ffb333333333333
00000001000a6c40 s _<span class="nv">$f64</span>.4059000000000000
00000001000a6c48 s _<span class="nv">$f64</span>.40c3880000000000
00000001000a6c50 s _<span class="nv">$f64</span>.40f0000000000000
00000001000a6c58 s _<span class="nv">$f64</span>.412e848000000000
00000001000a6c60 s _<span class="nv">$f64</span>.7ff0000000000000
00000001000a6c68 s _<span class="nv">$f64</span>.bfd3333333333333
00000001000a6c70 s _<span class="nv">$f64</span>.bfe62e42fefa39ef
                 U ___error
0000000100133e60 b __cgo_init
0000000100133e68 b __cgo_notify_runtime_init_done
0000000100133e70 b __cgo_thread_start
0000000100133e78 b __cgo_yield
                 U __exit
000000010005ad70 t __rt0_arm64_darwin
00000001000570d0 t _aeshashbody
0000000100162f30 s _block_size
00000001000570a0 t _callRet
                 U _clock_gettime
                 U _close
                 U _closedir
0000000100001ab0 t _cmpbody
<span class="m">0000000100057770</span> t _debugCall1024
...
...
000000010011d2a0 s _unicode/utf8.acceptRanges
<span class="m">0000000100120260</span> s _unicode/utf8.first
                 U _usleep
                 U _write
</code></pre></div>
<ul>
<li>ogjdump 工具用来显示二进制文件的信息</li>
</ul>
<div class="highlight"><pre><span></span><code>zsh ➜ objdump -d main

main:   file format mach-o arm64

Disassembly of section __TEXT,__text:

<span class="m">0000000100001000</span> &lt;_runtime.text&gt;:
<span class="m">100001000</span>: ff <span class="m">20</span> <span class="m">47</span> 6f  umlal2.4s       v31, v7, v7<span class="o">[</span><span class="m">0</span><span class="o">]</span>
<span class="m">100001004</span>: <span class="m">20</span> <span class="m">62</span> <span class="m">75</span> <span class="m">69</span>  ldpsw   x0, x24, <span class="o">[</span>x17, <span class="c1">#-88]</span>
<span class="m">100001008</span>: 6c <span class="m">64</span> <span class="m">20</span> <span class="m">49</span>  &lt;unknown&gt;
10000100c: <span class="m">44</span> 3a <span class="m">20</span> <span class="m">22</span>  &lt;unknown&gt;
<span class="m">100001010</span>: 5a <span class="m">46</span> <span class="m">58</span> <span class="m">50</span>  adr     x26, <span class="c1">#723146</span>
<span class="m">100001014</span>: 5f <span class="m">33</span> 4b <span class="m">38</span>  ldurb   wzr, <span class="o">[</span>x26, <span class="c1">#179]</span>
<span class="m">100001018</span>: 5f 6d <span class="m">45</span> <span class="m">65</span>  &lt;unknown&gt;
10000101c: <span class="m">34</span> 6f <span class="m">48</span> <span class="m">64</span>  &lt;unknown&gt;
<span class="m">100001020</span>: <span class="m">57</span> <span class="m">56</span> 6a 4c  &lt;unknown&gt;
<span class="m">100001024</span>: 2f <span class="m">66</span> <span class="m">64</span> 5f  &lt;unknown&gt;
<span class="m">100001028</span>: <span class="m">53</span> <span class="m">63</span> 6c <span class="m">66</span>  &lt;unknown&gt;
10000102c: <span class="m">34</span> 6d <span class="m">57</span> <span class="m">50</span>  adr     x20, <span class="c1">#716198</span>
<span class="m">100001030</span>: 6c <span class="m">56</span> <span class="m">79</span> <span class="m">46</span>  &lt;unknown&gt;
<span class="m">100001034</span>: <span class="m">36</span> <span class="m">32</span> 4b <span class="m">67</span>  &lt;unknown&gt;
...
...
</code></pre></div>
<ul>
<li>readelf 与 objdump 类似，展示的信息具体</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># readelf -all /usr/bin/make</span>
ELF Header:
  Magic:   7f <span class="m">45</span> 4c <span class="m">46</span> <span class="m">02</span> <span class="m">01</span> <span class="m">01</span> <span class="m">00</span> <span class="m">00</span> <span class="m">00</span> <span class="m">00</span> <span class="m">00</span> <span class="m">00</span> <span class="m">00</span> <span class="m">00</span> <span class="m">00</span>
  Class:                             ELF64
  Data:                              <span class="m">2</span><span class="err">&#39;</span>s complement, little endian
  Version:                           <span class="m">1</span> <span class="o">(</span>current<span class="o">)</span>
  OS/ABI:                            UNIX - System V
  ABI Version:                       <span class="m">0</span>
  Type:                              EXEC <span class="o">(</span>Executable file<span class="o">)</span>
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x40431d
  Start of program headers:          <span class="m">64</span> <span class="o">(</span>bytes into file<span class="o">)</span>
  Start of section headers:          <span class="m">180896</span> <span class="o">(</span>bytes into file<span class="o">)</span>
  Flags:                             0x0
  Size of this header:               <span class="m">64</span> <span class="o">(</span>bytes<span class="o">)</span>
  Size of program headers:           <span class="m">56</span> <span class="o">(</span>bytes<span class="o">)</span>
  Number of program headers:         <span class="m">9</span>
  Size of section headers:           <span class="m">64</span> <span class="o">(</span>bytes<span class="o">)</span>
  Number of section headers:         <span class="m">29</span>
  Section header string table index: <span class="m">28</span>

Section Headers:
  <span class="o">[</span>Nr<span class="o">]</span> Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  <span class="o">[</span> <span class="m">0</span><span class="o">]</span>                   NULL             <span class="m">0000000000000000</span>  <span class="m">00000000</span>
       <span class="m">0000000000000000</span>  <span class="m">0000000000000000</span>           <span class="m">0</span>     <span class="m">0</span>     <span class="m">0</span>
  <span class="o">[</span> <span class="m">1</span><span class="o">]</span> .interp           PROGBITS         <span class="m">0000000000400238</span>  <span class="m">00000238</span>
       000000000000001c  <span class="m">0000000000000000</span>   A       <span class="m">0</span>     <span class="m">0</span>     <span class="m">1</span>
  <span class="o">[</span> <span class="m">2</span><span class="o">]</span> .note.ABI-tag     NOTE             <span class="m">0000000000400254</span>  <span class="m">00000254</span>
       <span class="m">0000000000000020</span>  <span class="m">0000000000000000</span>   A       <span class="m">0</span>     <span class="m">0</span>     <span class="m">4</span>
  <span class="o">[</span> <span class="m">3</span><span class="o">]</span> .note.gnu.build-i NOTE             <span class="m">0000000000400274</span>  <span class="m">00000274</span>
       <span class="m">0000000000000024</span>  <span class="m">0000000000000000</span>   A       <span class="m">0</span>     <span class="m">0</span>     <span class="m">4</span>
  <span class="o">[</span> <span class="m">4</span><span class="o">]</span> .gnu.hash         GNU_HASH         <span class="m">0000000000400298</span>  <span class="m">00000298</span>
       000000000000004c  <span class="m">0000000000000000</span>   A       <span class="m">5</span>     <span class="m">0</span>     <span class="m">8</span>
  <span class="o">[</span> <span class="m">5</span><span class="o">]</span> .dynsym           DYNSYM           00000000004002e8  000002e8
       0000000000000b88  <span class="m">0000000000000018</span>   A       <span class="m">6</span>     <span class="m">1</span>     <span class="m">8</span>
  <span class="o">[</span> <span class="m">6</span><span class="o">]</span> .dynstr           STRTAB           0000000000400e70  00000e70
       000000000000040f  <span class="m">0000000000000000</span>   A       <span class="m">0</span>     <span class="m">0</span>     <span class="m">1</span>
  <span class="o">[</span> <span class="m">7</span><span class="o">]</span> .gnu.version      VERSYM           <span class="m">0000000000401280</span>  <span class="m">00001280</span>
       00000000000000f6  <span class="m">0000000000000002</span>   A       <span class="m">5</span>     <span class="m">0</span>     <span class="m">2</span>
  <span class="o">[</span> <span class="m">8</span><span class="o">]</span> .gnu.version_r    VERNEED          <span class="m">0000000000401378</span>  <span class="m">00001378</span>
       <span class="m">0000000000000070</span>  <span class="m">0000000000000000</span>   A       <span class="m">6</span>     <span class="m">1</span>     <span class="m">8</span>
</code></pre></div>
<ul>
<li>size 查看程序运行时各个段的实际内存占用</li>
</ul>
<div class="highlight"><pre><span></span><code>zsh ➜ size main
__TEXT  __DATA  __OBJC  others  dec hex
<span class="m">688128</span>  <span class="m">310624</span>  <span class="m">0</span>   <span class="m">4295554186</span>  <span class="m">4296552938</span>  1001831ea
</code></pre></div>
<ul>
<li>xxd 十六进制显示数据</li>
</ul>
<div class="highlight"><pre><span></span><code>zsh ➜ xxd main
<span class="m">00000000</span>: cffa edfe 0c00 <span class="m">0001</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0200</span> <span class="m">0000</span>  ................
<span class="m">00000010</span>: 0e00 <span class="m">0000</span> <span class="m">7009</span> <span class="m">0000</span> <span class="m">0400</span> <span class="m">2000</span> <span class="m">0000</span> <span class="m">0000</span>  ....p..... .....
<span class="m">00000020</span>: <span class="m">1900</span> <span class="m">0000</span> <span class="m">4800</span> <span class="m">0000</span> 5f5f <span class="m">5041</span> <span class="m">4745</span> 5a45  ....H...__PAGEZE
<span class="m">00000030</span>: 524f <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  RO..............
<span class="m">00000040</span>: <span class="m">0000</span> <span class="m">0000</span> <span class="m">0100</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  ................
<span class="m">00000050</span>: <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  ................
<span class="m">00000060</span>: <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">1900</span> <span class="m">0000</span> <span class="m">3801</span> <span class="m">0000</span>  ............8...
<span class="m">00000070</span>: 5f5f <span class="m">5445</span> <span class="m">5854</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  __TEXT..........
<span class="m">00000080</span>: <span class="m">0000</span> <span class="m">0000</span> <span class="m">0100</span> <span class="m">0000</span> <span class="m">0080</span> 0a00 <span class="m">0000</span> <span class="m">0000</span>  ................
<span class="m">00000090</span>: <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0080</span> 0a00 <span class="m">0000</span> <span class="m">0000</span>  ................
000000a0: <span class="m">0700</span> <span class="m">0000</span> <span class="m">0500</span> <span class="m">0000</span> <span class="m">0300</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  ................
000000b0: 5f5f <span class="m">7465</span> <span class="m">7874</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  __text..........
000000c0: 5f5f <span class="m">5445</span> <span class="m">5854</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  __TEXT..........
000000d0: <span class="m">0010</span> <span class="m">0000</span> <span class="m">0100</span> <span class="m">0000</span> <span class="m">8070</span> <span class="m">0800</span> <span class="m">0000</span> <span class="m">0000</span>  .........p......
000000e0: <span class="m">0010</span> <span class="m">0000</span> <span class="m">0400</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  ................
000000f0: <span class="m">0004</span> <span class="m">0080</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  ................
<span class="m">00000100</span>: 5f5f <span class="m">7379</span> 6d62 6f6c 5f73 <span class="m">7475</span> <span class="m">6231</span> <span class="m">0000</span>  __symbol_stub1..
<span class="m">00000110</span>: 5f5f <span class="m">5445</span> <span class="m">5854</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  __TEXT..........
<span class="m">00000120</span>: <span class="m">8080</span> <span class="m">0800</span> <span class="m">0100</span> <span class="m">0000</span> <span class="m">3402</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  ........4.......
<span class="m">00000130</span>: <span class="m">8080</span> <span class="m">0800</span> <span class="m">0500</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span> <span class="m">0000</span>  ................
...
...
</code></pre></div>




              

<!-- Giscus -->
<h2 id="__comments">Comments</h2>

<script src="https://giscus.app/client.js" data-repo="lrtz-v/lrtz-v.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnkzMDQyNzQ2MzE=" data-category="General" data-category-id="DIC_kwDOEiLcx84CQDFq"
  data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom"
  data-theme="dark" data-lang="zh-CN" crossorigin="anonymous" async>
  </script>

<!-- Synchronize Giscus theme with palette -->
<script>
  var giscus = document.querySelector("script[src*=giscus]")

  /* Set palette on initial load */
  var palette = __md_get("__palette")
  if (palette && typeof palette.color === "object") {
    var theme = palette.color.scheme === "slate" ? "dark" : "light"
    giscus.setAttribute("data-theme", theme)
  }

  /* Register event handlers after documented loaded */
  document.addEventListener("DOMContentLoaded", function () {
    var ref = document.querySelector("[data-md-component=palette]")
    ref.addEventListener("change", function () {
      var palette = __md_get("__palette")
      if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"

        /* Instruct Giscus to change theme */
        var frame = document.querySelector(".giscus-frame")
        frame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          "https://giscus.app"
        )
      }
    })
  })
</script>

            </article>
            
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../centos_disk_mount/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Centos磁盘挂载" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Centos磁盘挂载
            </div>
          </div>
        </a>
      
      
        
        <a href="../../Redis/redis/" class="md-footer__link md-footer__link--next" aria-label="Next: 简介" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              简介
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            




<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input type="checkbox" class="md-toggle" id="__settings">
<div class="md-consent__settings">
  <ul class="task-list">
    
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Custom name
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);console.log(new FormData(form)),__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.instant", "navigation.tracking", "content.code.annotate", "content.tabs.link", "navigation.indexes", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
        <script src="../../javascripts/extra.js"></script>
      
        <script src="../../javascripts/tablesort.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>